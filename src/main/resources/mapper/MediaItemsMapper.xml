<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.acgm.acgmmediatracker.mapper.MediaItemsMapper">

    <resultMap id="MediaItemsResultMap" type="com.acgm.acgmmediatracker.entity.MediaItems">
        <id property="id" column="id" />
        <result property="userId" column="user_id" />
        <result property="type" column="type" />
        <result property="status" column="status" />
        <result property="title" column="title" />
        <result property="notes" column="notes" />
        <result property="rating" column="rating" />
        <result property="startDate" column="start_date" />
        <result property="finishDate" column="finish_date" />
        <result property="coverUrl" column="cover_url" />
        <result property="source" column="source" />
        <result property="createdAt" column="created_at" />
        <result property="updatedAt" column="updated_at" />
        <result property="deletedAt" column="deleted_at" />
        <result property="rowVersion" column="row_version" />
        <result property="finishMonth" column="finish_month" />
    </resultMap>

    <sql id="MediaItems_Columns">
        id,
        user_id,
        type,
        status,
        title,
        notes,
        rating,
        start_date,
        finish_date,
        cover_url,
        source,
        created_at,
        updated_at,
        deleted_at,
        row_version,
        finish_month
    </sql>

    <select id="selectById" resultMap="MediaItemsResultMap">
        SELECT <include refid="MediaItems_Columns" />
        FROM media_items
        WHERE id = #{id}
    </select>

    <select id="selectAll" resultMap="MediaItemsResultMap">
        SELECT <include refid="MediaItems_Columns" />
        FROM media_items
    </select>

    <insert id="insert" useGeneratedKeys="true" keyProperty="id"
            parameterType="com.acgm.acgmmediatracker.entity.MediaItems">
        INSERT INTO media_items (
            user_id,
            type,
            status,
            title,
            notes,
            rating,
            start_date,
            finish_date,
            cover_url,
            source,
            created_at,
            updated_at,
            deleted_at,
            row_version,
            finish_month
        ) VALUES (
            #{userId},
            #{type},
            #{status},
            #{title},
            #{notes},
            #{rating},
            #{startDate},
            #{finishDate},
            #{coverUrl},
            #{source},
            #{createdAt},
            #{updatedAt},
            #{deletedAt},
            #{rowVersion},
            #{finishMonth}
        )
    </insert>

    <update id="update" parameterType="com.acgm.acgmmediatracker.entity.MediaItems">
        UPDATE media_items
        SET
            user_id = #{userId},
            type = #{type},
            status = #{status},
            title = #{title},
            notes = #{notes},
            rating = #{rating},
            start_date = #{startDate},
            finish_date = #{finishDate},
            cover_url = #{coverUrl},
            source = #{source},
            updated_at = #{updatedAt},
            deleted_at = #{deletedAt},
            row_version = #{rowVersion},
            finish_month = #{finishMonth}
        WHERE id = #{id}
    </update>

    <delete id="delete">
        DELETE FROM media_items
        WHERE id = #{id}
    </delete>

</mapper>
